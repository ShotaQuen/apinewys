<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- start: Icons -->
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<!-- start: Icons -->
<!-- start: CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ShotaQuen/cdn/assets/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/ShotaQuen/cdn/assets/css/style.css">
<!-- end: CSS -->
<title>IkannNew - Dark Mode</title>
<style>
  body {
    background-color: #0d1117;
    color: #c9d1d9;
  }
  .bg-main-dark {
    background-color: #161b22;
  }
  .bg-secondary-dark {
    background-color: #21262d;
  }
  .text-muted {
    color: #8b949e !important;
  }
  .sidebar {
    background-color: #161b22;
    border-right: 1px solid #30363d;
  }
  .sidebar-menu-item a, .sidebar-logo {
    color: #c9d1d9 !important;
  }
  nav, .card, .statistik-card, .latest-usage-card {
    background-color: #161b22;
    border-radius: 12px;
  }
  .badge {
    background-color: #21262d;
    color: #58a6ff;
  }
  .sidebar-menu-item a:hover {
    background-color: #21262d;
    color: #58a6ff;
    border-radius: 8px;
  }
  .purple { background-color: #7b61ff; }
</style>
</head>

<body>

<!-- start: Sidebar -->
<div class="sidebar position-fixed top-0 bottom-0">
  <div class="d-flex align-items-center p-3">
    <a href="#" class="sidebar-logo text-uppercase fw-bold text-decoration-none fs-4">Ikann</a>
    <i class="sidebar-toggle ri-arrow-left-circle-line ms-auto fs-5 d-none d-md-block"></i>
  </div>
  <ul class="sidebar-menu p-3 m-0 mb-0">
    <li class="sidebar-menu-item active">
      <a href="#">
        <i class="ri-dashboard-line sidebar-menu-item-icon"></i>
        Dashboard
      </a>
    </li>
    <li class="sidebar-menu-divider mt-3 mb-1 text-uppercase">Api</li>
    <li class="sidebar-menu-item has-dropdown">
      <a href="#">
        <i class="fa-regular fa-comment sidebar-menu-item-icon"></i>
        Ai
        <i class="ri-arrow-down-s-line sidebar-menu-item-accordion ms-auto"></i>
      </a>
      <ul class="sidebar-dropdown-menu">
        <li class="sidebar-dropdown-menu-item">
          <a href="/api/viooai?q=hello">
            Vioo Ai
          </a>
        </li>
      </ul>
    </li>
  </ul>
</div>
<div class="sidebar-overlay"></div>
<!-- end: Sidebar -->

<!-- start: Main -->
<main style="background-color: #0d1117;">
  <div class="p-2">
    <!-- start: Navbar -->
    <nav class="px-3 py-2 bg-main-dark rounded shadow-sm">
      <i class="ri-menu-line sidebar-toggle me-3 d-block d-md-none"></i>
      <h5 class="fw-bold mb-0 me-auto">Dashboard</h5>
    </nav>
    <!-- end: Navbar -->

    <!-- start: Content -->
    <div class="py-4">
      <!-- start: Statistik Card -->
      <div class="row g-3 mb-4">
        <div class="col-12">
          <div class="bg-main-dark rounded shadow-sm p-3">
            <h5 class="fw-bold">Statistik</h5>
            <p class="text-muted mb-4">Request statistik for this API</p>
            <div class="row g-3">
              <div class="col-6 col-md-3">
                <div class="d-flex align-items-center bg-secondary-dark rounded p-3">
                  <i class="ri-pie-chart-line fs-4 text-white purple p-2 rounded me-3"></i>
                  <div>
                    <div class="text-muted small">Request</div>
                    <div class="fw-bold">511660</div>
                  </div>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="d-flex align-items-center bg-secondary-dark rounded p-3">
                  <i class="ri-user-line fs-4 text-white bg-info p-2 rounded me-3"></i>
                  <div>
                    <div class="text-muted small">Visitor</div>
                    <div class="fw-bold" id="visitorCount">0</div>
                  </div>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="d-flex align-items-center bg-secondary-dark rounded p-3">
                  <i class="ri-checkbox-circle-line fs-4 text-white bg-success p-2 rounded me-3"></i>
                  <div>
                    <div class="text-muted small">Success</div>
                    <div class="fw-bold">511180</div>
                  </div>
                </div>
              </div>
              <div class="col-6 col-md-3">
                <div class="d-flex align-items-center bg-secondary-dark rounded p-3">
                  <i class="ri-bug-line fs-4 text-white bg-danger p-2 rounded me-3"></i>
                  <div>
                    <div class="text-muted small">Failed</div>
                    <div class="fw-bold">480</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- end: Statistik Card -->

      <!-- start: Latest Usage Card -->
      <div class="bg-main-dark rounded shadow-sm p-3">
        <h5 class="fw-bold mb-3">Latest Usage</h5>
        <div class="d-flex align-items-start mb-4">
          <div>
            <i class="ri-checkbox-circle-line fs-4 text-white bg-success p-2 rounded me-3"></i>
          </div>
          <div>
            <div class="fw-semibold">Tebak Hero</div>
            <div class="text-muted small">17/04/2025 12:56:51</div>
            <span class="badge mt-1">windows</span>
          </div>
        </div>
      </div>
      
            <div class="bg-main-dark rounded shadow-sm p-3 mt-4">
  <h5 class="fw-bold mb-3">Latest Error</h5>
  <div class="d-flex align-items-start mb-4">
    <div>
      <i class="ri-bug-line fs-4 text-white bg-danger p-2 rounded me-3"></i>
    </div>
    <div>
      <div class="fw-semibold" id="error-message">Memuat error...</div>
      <div class="text-muted small" id="error-time">-</div>
      <span class="badge mt-1" id="error-platform">-</span>
    </div>
  </div>
</div>
      
      <!-- end: Latest Usage Card -->
    </div>
    <!-- end: Content -->
  </div>
</main>
<!-- end: Main -->

<!-- start: JS -->
<script src="https://cdn.jsdelivr.net/gh/ShotaQuen/cdn/assets/js/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/chart.min.js" integrity="sha512-sW/w8s4RWTdFFSduOTGtk4isV1+190E/GghVffMA9XczdJ2MDzSzLEubKAs5h0wzgSJOQTRYyaz73L3d6RtJSg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdn.jsdelivr.net/gh/ShotaQuen/cdn/assets/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/ShotaQuen/cdn/assets/js/script.js"></script>

<script>
  fetch("https://visitor.api.akuari.my.id/umum/view/tambah-ip?id=https://www.ikann.biz.id/doc.html")
    .then(res => res.json())
    .then(data => {
      document.getElementById('visitorCount').innerText = data.visitor.total || 0;
    })
    .catch(err => {
      console.error("Gagal mengambil data visitor:", err);
    });
    
    fetch("/api/latest-error")
  .then(res => res.text())
  .then(text => {
    // Ekstrak data dari format teks
    const messageMatch = text.match(/Message:\s*(.+)/);
    const timeMatch = text.match(/\[(.+?)\]/);
    const platformMatch = text.match(/Platform:\s*(.+)/);

    document.getElementById("error-message").textContent = messageMatch ? messageMatch[1] : "Tidak diketahui";
    document.getElementById("error-time").textContent = timeMatch ? timeMatch[1] : "-";
    document.getElementById("error-platform").textContent = platformMatch ? platformMatch[1] : "-";
  })
  .catch(err => {
    document.getElementById("error-message").textContent = "Gagal memuat error";
    console.error(err);
  });
</script>
<!-- end: JS -->

</body>
</html>
